<!DOCTYPE html><html lang="ko-KR" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="일 전"><meta name="hour-prompt" content="시간 전"><meta name="minute-prompt" content="분 전"><meta name="justnow-prompt" content="방금"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Same-Origin Policy와 해결 방안" /><meta name="author" content="bactoria" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="Vue.js 프로젝트에서 Rest API로 Ajax요청을 했더니 다음과 같은 에러를 직면했다." /><meta property="og:description" content="Vue.js 프로젝트에서 Rest API로 Ajax요청을 했더니 다음과 같은 에러를 직면했다." /><link rel="canonical" href="https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/" /><meta property="og:url" content="https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/" /><meta property="og:site_name" content="Bactoria" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-05-17T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Same-Origin Policy와 해결 방안" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@bactoria" /><meta name="google-site-verification" content="google7bf670670a870e33.html" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"bactoria"},"description":"Vue.js 프로젝트에서 Rest API로 Ajax요청을 했더니 다음과 같은 에러를 직면했다.","url":"https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/","@type":"BlogPosting","headline":"Same-Origin Policy와 해결 방안","dateModified":"2020-02-08T07:20:04+00:00","datePublished":"2019-05-17T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/"},"@context":"https://schema.org"}</script><title>Same-Origin Policy와 해결 방안 | Bactoria</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bactoria"><meta name="application-name" content="Bactoria"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="ko-KR"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/25674959?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Bactoria</a></div><div class="site-subtitle font-italic">for Self-Motivation</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/bactoria" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['bactoria','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>Same-Origin Policy와 해결 방안</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Same-Origin Policy와 해결 방안</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/bactoria">bactoria</a> </em></div><div class="d-flex"><div> <span> 게시 <em class="timeago" date="2019-05-17 00:00:00 +0000" data-toggle="tooltip" data-placement="bottom" title="2019-05-17, 00:00 +0000" >2019년 05월 17일</em> </span> <span> 업데이트 <em class="timeago" date="2020-02-08 16:20:04 +0900 " data-toggle="tooltip" data-placement="bottom" title="2020-02-08, 16:20 +0900" >2020년 02월 08일</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2091 단어"> <em>11 분</em>읽는 시간</span></div></div></div><div class="post-content"><p>Vue.js 프로젝트에서 Rest API로 Ajax요청을 했더니 다음과 같은 에러를 직면했다.</p><p> </p><p><strong>Chrome</strong><br /> <img data-src="https://user-images.githubusercontent.com/25674959/57191428-81660080-6f60-11e9-87f4-2533cf1cb640.png" alt="image" data-proofer-ignore></p><p> </p><p><strong>Firefox</strong><br /> <img data-src="https://user-images.githubusercontent.com/25674959/57191423-71e6b780-6f60-11e9-8ec7-172f7974d606.png" alt="image" data-proofer-ignore></p><p> </p><p><strong>해결법</strong></p><ol><li>CORS 허용 할 메소드에 @CrossOrigin를 추가<li>시큐리티 설정에 Options Method를 permitAll</ol><p> </p><p>REST API 프로젝트를 2개를 했었는데, 2번 모두 SOP 문제에 직면했었고 검색하면서 해결했다. 그래서 지금은 검색하지 않아도 해결 할 수 있다. 하지만 SOP가 무엇이고 왜 나온 것인지, @CrossOrigin을 적용하면 구체적으로 무슨 일이 이루어지는지, Options 메서드를 허용 해야 하는 이유에 대해서는 깊이 생각을 하지 않았던 것 같다.</p><p>해결법은 아는데, 문제가 생긴 근본적인 원인을 모르는 것이다.</p><p>프로그래머는 프로덕션을 만드는 사람이고, 서비스를 정상적으로 되게 하는 사람이고, 서비스가 잘 돌아가게 하는 사람이라고 많이 들었다.</p><p>하지만 최소한 왜 그런건지는 이해를 해야할 것 같다. 어떻게 보면 원인을 알아야 생산성이 더 높아진다고 보는게 맞는 것 같기도 하네. 막무가내로 해결하는 것은 대학교에서 시험치기 위해 암기하는거랑 다를게 없어보인다.</p><p> </p><h2 id="ajax-로-부터">Ajax 로 부터<a href="#ajax-로-부터" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Ajax부터 시작하면 될것 같다.</p><p>이전 웹페이지들은 새로운 내용을 갱신하기 위해 페이지를 리프레시 했었는데,</p><p>페이지를 리프레시 하지 않고도 서버와 데이터를 주고 받을 수 있게 되었다. 이걸 Ajax라고 한다.</p><p><a href="https://sungmooncho.com/2012/12/04/gmail-and-ajax/2004년">지메일이 핫메일을 이긴 진짜 이유 - 조성문님</a>에 따르면 2004년 4월 1일에 Gmail이 나왔는데, 메일을 확인하거나 발송할 때 화면 전체가 깜빡이는 것이 없어서 핫메일보다 빠르고 쾌적했다고 한다. Ajax 를 사용했기 때문이다. (Gmail의 성공 요인은 Ajax가 전부는 아니라고 한다. 어쨌든 빠른건 사실이다.)</p><p>이 Ajax는 <code class="language-plaintext highlighter-rouge">XMLHttpRequest</code> 객체를 통해 구현할 수 있으며, 여기에는 보안 이슈가 있었디.</p><p> </p><h2 id="csrf-공격-cross-site-request-forgery">CSRF 공격 (Cross Site Request Forgery)<a href="#csrf-공격-cross-site-request-forgery" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>만약 내가 웹페이지를 만들었는데, 아래와 같은 스크립트를 넣어서, 접속자들의 페이스북 타임라인 글들을 삭제하는 것이 가능하다면 ?</p><p><strong>http://fakebook.com</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://facebook.com/timelines</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//url은 막무가내로 만든거</span>
<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">200</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">삭제 완료</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">앗 실패했군</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</pre></table></code></div></div><p>이전에 facebook에 로그인을 한 상태에서 fakebook에 방문한다면 그 사람의 타임라인 글을 삭제해버릴 수 있다. (물론 페이스북을 저렇게 단순하게 공격할 수도 없겠지만..)</p><p> </p><h2 id="sop-same-origin-policy">SOP (Same-Origin Policy)<a href="#sop-same-origin-policy" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>SOP는 웹 사이트 방문 시에 다른 Origin의 DOM에 접근시 허용하지 않는 정책이었다. 유저가 신뢰할 수 없는 사이트 방문에 대한 걱정을 덜 수 있다.</p><p>Ajax가 나온 이후 CSRF를 막기 위해 XMLHttpRequest에도 확장 적용되었다. 웹 브라우저는 현재 웹 페이지에 포함된 스크립트가 어떤 웹 페이지의 데이터에 액세스하는 것을 허용하기 위해서는, 이 두 웹 페이지가 <code class="language-plaintext highlighter-rouge">Same Origin</code>이어야 한다.</p><p>즉, fakebook을 방문했을 때, facebook으로 스크립트를 보낼 수 없게끔 웹 브라우저가 막는 것이 가능해진다.</p><p> </p><h3 id="same-origin-이란">Same Origin 이란?<a href="#same-origin-이란" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><strong>Same Origin</strong> : 두 URL의 <code class="language-plaintext highlighter-rouge">스키마</code>, <code class="language-plaintext highlighter-rouge">호스트</code>, <code class="language-plaintext highlighter-rouge">포트</code>가 같을 경우</p><p><strong>Cross Origin</strong> : 3개 중에도 하나라도 다를 경우</p><p> </p><ul><li><code class="language-plaintext highlighter-rouge">http://test.com:3000</code> &amp; <code class="language-plaintext highlighter-rouge">https://test.com:3000</code> -&gt; Cross Origin<li><code class="language-plaintext highlighter-rouge">http://test.com:3000</code> &amp; <code class="language-plaintext highlighter-rouge">http://test.com:8080</code> -&gt; Cross Origin<li><code class="language-plaintext highlighter-rouge">http://test.com:3000</code> &amp; <code class="language-plaintext highlighter-rouge">http://real.com:3000</code> -&gt; Cross Origin</ul><p> </p><p>Same Origin이 아닐 경우(Cross Origin 일 경우), <strong>브라우저에 의해 요청이 거절된다.</strong></p><p>거절된 것이 이 글의 가장 위에 있는 이미지이다.</p><p> </p><h2 id="해결법">해결법<a href="#해결법" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="1-jsonp">1. JSONP<a href="#1-jsonp" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>2005년 제안된 방법.</p><p>JSONP를 사용하면 XMLHttpRequest 객체를 사용하지 않고 Cross Origin인 서버로부터 JSON 데이터를 받을 수 있다.</p><p>XMLHttpRequest 객체를 사용하지 않기 때문에 SOP를 위배하지 않는 것이다.</p><p>JSONP는 서버로부터 콜백함수를 실행하는 코드를 받아온다.</p><p><strong>요청</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// ...</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">http://food-truck.shop/search?callback=loadTruckList&amp;s=떡볶이</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">http://food-truck.shop/search?</code><strong><code class="language-plaintext highlighter-rouge">callback=loadTruckList</code></strong><code class="language-plaintext highlighter-rouge">&amp;s=떡볶이</code> 를 아래와 같이 바꿔준다.</p><p><strong>응답</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// ...</span>
<span class="nx">loadTruckList</span><span class="p">([</span><span class="dl">"</span><span class="s2">John Miller</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">John C. Potter</span><span class="dl">"</span><span class="p">])</span>
</pre></table></code></div></div><p>food-truck.shop에서 위와 같이 변환해준 것이다.</p><p>jsonp는 클라이언트에서 쓰겠다고 해서 쓸 수 있는 것이 아니라, 서버에서 위의 형식처럼 함수로 응답해주어야 한다.</p><p>즉, 서버에서 json 데이터를 함수로 wrapping해서 응답해줘야 하는데 이처럼 감싸는 행위를 Padding이라고 불러서 JSONP 라고 부르는 것 같다.</p><p>GET Method만을 지원한다는 단점과 보안상의 이슈로 인해 CORS를 추천하는 분위기 라고 함.</p><p> </p><h3 id="2-cors-cross-origin-resource-sharing">2. CORS (Cross-Origin Resource Sharing)<a href="#2-cors-cross-origin-resource-sharing" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li>2004년 3월 VoiceXML 브라우저의 안전한 Cross-Origin Data 요청을 허용하기 위해 Cross-Origin 지원을 제안함<li>2006년 5월 최초의 W3C 작업 초안이 제출됨<li>2009년 3월 초안은 CORS(Cross-Origin Resource Sharing)로 개명됨<li>2014년 1월 W3C 권고안으로 승인(<a href="https://www.w3.org/TR/cors/">W3C Recommendation of CORS</a>) (구식)<li>201?년 https://fetch.spec.whatwg.org/ (현재)</ul><p> </p><p>JSONP 패턴의 현대적인 대안.</p><p>서버와 클라이언트가 정해진 헤더를 통해 서로 요청이나 응답에 반응할지 결정하는 방식으로 CORS라는 이름으로 표준화됨.</p><p><img data-src="https://user-images.githubusercontent.com/25674959/57578581-fd64c900-74c9-11e9-8096-f1c6d153c421.png" alt="cors_xhr" data-proofer-ignore></p><p> </p><p>서버에 클라이언트가 서버로 HTTP Request를 보낼 때</p><ul><li>GET ::<ul><li>custom header가 없으면</ul><li>HEAD ::<ul><li>custom header가 없으면</ul><li>POST ::<ul><li>ContentType이 standard(<code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> or <code class="language-plaintext highlighter-rouge">multipart/form-data</code> or <code class="language-plaintext highlighter-rouge">text/plain</code>) 이고, custom header가 없으면</ul></ul><p>Cross-Origin에 리소스를 요청 할 수 있다.</p><p>그 밖의 경우 (ex. POST로 요청에 Content-type이 application/json 인 경우 -&gt; custom header를 가짐.)에는 서버에 <strong>Preflight Request</strong>를 보내야 함.</p><h3 id="preflight-request">Preflight Request<a href="#preflight-request" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>클라이언트가 서버로 HTTP Request를 보낼 때 위의 기준을 충족하지 못하면, <strong>브라우저가 자동으로 원래 요청보다 먼저 OPTIONS Method로 HTTP 요청하여, 원래 요청을 전송해도 안전한지 확인한다.</strong></p><p>위 그림에서 빨간 부분이 Preflight Request 과정이다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">// Request Message</span>
<span class="nx">OPTIONS</span> <span class="o">/</span><span class="nx">users</span><span class="o">/</span><span class="p">:</span><span class="nx">id</span> 
<span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Request</span><span class="o">-</span><span class="nx">Method</span><span class="p">:</span> <span class="nx">DELETE</span> 
<span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Request</span><span class="o">-</span><span class="nx">Headers</span><span class="p">:</span> <span class="nx">origin</span><span class="p">,</span> <span class="nx">x</span><span class="o">-</span><span class="nx">requested</span><span class="o">-</span><span class="kd">with</span>
<span class="nx">Origin</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//example.com</span>

<span class="c1">// Response Message</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="nx">Content</span><span class="o">-</span><span class="nx">Length</span><span class="p">:</span> <span class="mi">0</span>
<span class="nx">Connection</span><span class="p">:</span> <span class="nx">keep</span><span class="o">-</span><span class="nx">alive</span>
<span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Allow</span><span class="o">-</span><span class="nx">Origin</span><span class="p">:</span> <span class="o">*</span>
<span class="nx">Access</span><span class="o">-</span><span class="nx">Control</span><span class="o">-</span><span class="nx">Allow</span><span class="o">-</span><span class="nx">Methods</span><span class="p">:</span> <span class="nx">POST</span><span class="p">,</span> <span class="nx">GET</span><span class="p">,</span> <span class="nx">OPTIONS</span><span class="p">,</span> <span class="nx">DELETE</span>
</pre></table></code></div></div><p> </p><h3 id="jsonp-vs-cors">JSONP vs CORS<a href="#jsonp-vs-cors" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>JSONP는 GET Method만 지원하는 반면, CORS는 다른 Method도 지원한다.</p><p>JSONP는 사이트 간 스크립팅(XSS) 문제를 야기할 수 있다.</p><p>CORS를 사용하면 JSONP보다 더 나은 오류 처리를 지원하는 XHR(XMLHttpRequest)를 사용할 수 있다.</p><p>CORS는 XHR Level2에서 적용되었는데, XHR2는 대부분의 최신 웹 브라우저에서 지원한다.</p><p><img data-src="https://user-images.githubusercontent.com/25674959/57901997-3f16ba80-78a2-11e9-9aa9-f716a80a582f.png" alt="image" data-proofer-ignore> (https://caniuse.com/#feat=xhr2)</p><p>IE10 이하는 CORS 지원하지 않음. IE9, 8 이하에서는 <code class="language-plaintext highlighter-rouge">XDomainRequest</code>를 사용해야 하고, 그 이하는 JSONP를 사용해야 한다. JSONP는 CORS가 지원되기 이전의 기존 브라우저에서도 동작하기에 브라우저 호환을 중요시하는 곳에서는 JSONP도 쓰고 있을 것 같다.</p><p>(<code class="language-plaintext highlighter-rouge">XDomainRequest</code>가 있지만, Get, Post만 지원함. =&gt; TODO :: CRUD 어떻게?)</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c1">// XDomainRequest</span>

<span class="kd">var</span> <span class="nx">xdr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XDomainRequest</span><span class="p">();</span>
<span class="nx">xdr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">get</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">http://www.contoso.com/xdr.aspx</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xdr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</pre></table></code></div></div><p>Axios의 경우 0.6.0 버전에서는 XDomainRequest로 IE8을 지원했음. (현재 Axios는 IE11만 지원)</p><p> </p><h2 id="참고">참고<a href="#참고" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>https://docs.spring.io/spring/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/html/cors.html<li>https://tools.ietf.org/html/rfc6749#section-4.3.2<li>https://brunch.co.kr/@adrenalinee31/1<li>https://heowc.dev/2018/03/13/spring-boot-cors/<li>https://www.zerocho.com/category/HTTP/post/5b4c4e3efc5052001b4f519b<li>https://wit.nts-corp.com/2014/04/22/1400<li>https://itstory.tk/entry/CSRF-%EA%B3%B5%EA%B2%A9%EC%9D%B4%EB%9E%80-%EA%B7%B8%EB%A6%AC%EA%B3%A0-CSRF-%EB%B0%A9%EC%96%B4-%EB%B0%A9%EB%B2%95<li>https://greatkim91.tistory.com/14<li>https://www.w3.org/Security/wiki/Same_Origin_Policy<li>SOP<ul><li>https://www.internetmap.kr/entry/Sameorigin-policy</ul><li>JSONP<ul><li>https://ko.wikipedia.org/wiki/JSONP<li>https://kingbbode.tistory.com/26<li>http://charlie0301.blogspot.com/2013/12/jquery-ajax-same-origin-policy-jsonp.html<li>http://dev.epiloum.net/1311</ul><li>CORS<ul><li>https://dev.to/effingkay/cors-preflighted-requests–options-method-3024<li>https://developer.mozilla.org/ko/docs/Web/HTTP/Access_control_CORS<li><a href="http://www.codejs.co.kr/cors-%EC%84%A4%EC%A0%95%ED%95%B4%EB%8F%84-ie%EC%97%90%EC%84%9C-%ED%81%AC%EB%A1%9C%EC%8A%A4-%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84-%EC%9A%94%EC%B2%AD-%EB%B6%88%EA%B0%80-%EC%9B%90%EC%9D%B8-no-transport/">CORS 설정해도 IE에서 크로스 도메인간 요청 불가 원인</a></ul></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/rest/'>Rest</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Same-Origin Policy와 해결 방안 - Bactoria&url=https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Same-Origin Policy와 해결 방안 - Bactoria&u=https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Same-Origin Policy와 해결 방안 - Bactoria&url=https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/2022/02/04/2022%EB%85%84-1%EC%9B%94-%ED%9A%8C%EA%B3%A0/">2022년 1월 회고</a><li><a href="/2022/01/02/2021%EB%85%84-%ED%9A%8C%EA%B3%A0/">2021년 회고</a><li><a href="/2020/04/19/%EB%A7%88%EC%8A%A4%ED%81%AC-%EA%B5%AC%EB%A7%A4-%EC%95%8C%EB%A6%AC%EB%AF%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%9B%84%EA%B8%B0/">마스크 구매 알리미 서비스 후기</a><li><a href="/2021/08/15/%EA%B3%A0%EC%96%91%EC%8B%9C-%EB%85%B8%EA%B3%A0%EC%82%B0-%EB%B0%B1%ED%8C%A8%ED%82%B9/">고양시 노고산 백패킹</a><li><a href="/2021/05/16/2021%EB%85%84-19%EC%A3%BC%EC%B0%A8-%ED%9A%8C%EA%B3%A0/">2021년 19주차 회고</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%EA%B3%B5%EB%AA%A8%EC%A0%84/">공모전</a> <a class="post-tag" href="/tags/%EB%B9%85%EC%8A%A4%EB%B9%84%EC%B1%8C%EB%A6%B0%EC%A7%80/">빅스비챌린지</a> <a class="post-tag" href="/tags/%EC%9D%B4%EB%B2%88%EC%A3%BC%EC%97%90%EA%B5%AC%EB%A7%A4%ED%95%9C%EC%B1%85/">이번주에구매한책</a> <a class="post-tag" href="/tags/%EA%B0%9C%EB%B0%9C/">개발</a> <a class="post-tag" href="/tags/%EA%B5%AC%EA%B8%80%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EC%9E%BC/">구글클라우드잼</a> <a class="post-tag" href="/tags/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/">오브젝트</a> <a class="post-tag" href="/tags/%EC%9A%B0%EC%95%84%ED%95%9C%ED%85%8C%ED%81%AC%EC%BD%94%EC%8A%A4/">우아한테크코스</a> <a class="post-tag" href="/tags/%EC%B7%A8%EC%97%85/">취업</a> <a class="post-tag" href="/tags/%ED%94%BC%EB%93%9C%EB%B0%B1/">피드백</a> <a class="post-tag" href="/tags/coc/">CoC</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/2019/05/28/Rest-API-%EB%9E%80/"><div class="card-body"> <em class="timeago small" date="2019-05-28 00:00:00 +0000" >2019년 05월 28일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Rest API 란?</h3><div class="text-muted small"><p> Vue 스터디를 하면서 최근에 Rest API에 관한 얘기가 나왔는데, REST에 대해 잘 모르고 있는 것 같아 이번 기회에 확실히 알고 넘어가고자 인터넷을 좀 뒤적거렸다.   그런 REST API로 괜찮은가? by 이응준님 (DEVIEW 2017) REST의 representation이란 무엇인가 by 이응준님 (blog) 인프런 REST AP...</p></div></div></a></div><div class="card"> <a href="/2022/02/04/2022%EB%85%84-1%EC%9B%94-%ED%9A%8C%EA%B3%A0/"><div class="card-body"> <em class="timeago small" date="2022-02-04 07:26:33 +0000" >2022년 02월 04일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2022년 1월 회고</h3><div class="text-muted small"><p> 코드 리뷰어 2022 공채 신입 코드리뷰어 로 활동하고 있다. 조직에 합류하기 전 인턴 때 코드 리뷰를 받으면서 많이 성장했다고 느꼈기에 나도 되돌려주고 싶었다. 코드 리뷰는 대부분 업무시간을 할애하긴 하지만, 새벽에 리뷰를 하는 경우도 있어 체력적으로 힘이 들었는데, 뉴크루가 성장하는 모습이 너무 대놓고 보여서 뿌듯함을 느낀다. 리뷰이가 앞으로 조...</p></div></div></a></div><div class="card"> <a href="/2022/01/02/2021%EB%85%84-%ED%9A%8C%EA%B3%A0/"><div class="card-body"> <em class="timeago small" date="2022-01-02 21:07:38 +0000" >2022년 01월 02일</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2021년 회고</h3><div class="text-muted small"><p> 2021년 나의 상황들을 되돌아보았다. 2021년의 취미생활 2020년에는 취미가 없었다. 그래서 누군가가 “취미가 뭐에요?” 라고 물어보면 답하기가 정말 곤란했다. 그런데 올해에는 취미라고 말 할 수 있는 것들이 생겼다. 취미: 백패킹 나는 집 밖을 잘 안나가지만, 액티비티는 좋아하는 모순된 사람이다. 집에서 재택근무만 하다보니 너무 집...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/2019/05/16/%EC%85%80%EB%A0%88%EB%8B%88%EC%9B%80%EC%9C%BC%EB%A1%9C-%EC%BB%A4%EB%AE%A4%EB%8B%88%ED%8B%B0-%ED%99%8D%EB%B3%B4%ED%95%98%EA%B8%B0/" class="btn btn-outline-primary" prompt="이전 글"><p>셀레니움으로 커뮤니티 홍보하기</p></a> <a href="/2019/05/17/Vue-+-Firestore-%EB%AC%B4%ED%95%9C%EC%8A%A4%ED%81%AC%EB%A1%A4/" class="btn btn-outline-primary" prompt="다음 글"><p>Vue + Firestore 무한스크롤</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://bactoria.github.io/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/'; this.page.identifier = '/2019/05/17/Same-Origin-Policy%EC%99%80-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://bactoria.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/bactoria">bactoria</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%EA%B3%B5%EB%AA%A8%EC%A0%84/">공모전</a> <a class="post-tag" href="/tags/%EB%B9%85%EC%8A%A4%EB%B9%84%EC%B1%8C%EB%A6%B0%EC%A7%80/">빅스비챌린지</a> <a class="post-tag" href="/tags/%EC%9D%B4%EB%B2%88%EC%A3%BC%EC%97%90%EA%B5%AC%EB%A7%A4%ED%95%9C%EC%B1%85/">이번주에구매한책</a> <a class="post-tag" href="/tags/%EA%B0%9C%EB%B0%9C/">개발</a> <a class="post-tag" href="/tags/%EA%B5%AC%EA%B8%80%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EC%9E%BC/">구글클라우드잼</a> <a class="post-tag" href="/tags/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/">오브젝트</a> <a class="post-tag" href="/tags/%EC%9A%B0%EC%95%84%ED%95%9C%ED%85%8C%ED%81%AC%EC%BD%94%EC%8A%A4/">우아한테크코스</a> <a class="post-tag" href="/tags/%EC%B7%A8%EC%97%85/">취업</a> <a class="post-tag" href="/tags/%ED%94%BC%EB%93%9C%EB%B0%B1/">피드백</a> <a class="post-tag" href="/tags/coc/">CoC</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
